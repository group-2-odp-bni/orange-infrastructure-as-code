# =============================================================================
# Group Variables - K3s Master Nodes
# =============================================================================

# -----------------------------------------------------------------------------
# K3s Role
# -----------------------------------------------------------------------------
k3s_control_node: true

# K3s server configuration (must be dict for xanmanning.k3s v3.6+)
k3s_server:
  disable:
    - traefik
    - servicelb
  write-kubeconfig-mode: "644"
  cluster-cidr: "{{ k3s_cluster_cidr }}"
  service-cidr: "{{ k3s_service_cidr }}"
  tls-san:
    - "{{ ansible_host }}"
  node-label:
    - "workload-type=control-plane"
    - "node-role.kubernetes.io/control-plane=true"

# -----------------------------------------------------------------------------
# Master Node Configuration
# -----------------------------------------------------------------------------
# Taint master to prevent workloads (optional - keeping untainted for now)
k3s_master_taint: false

# Node labels for master (additional labels)
k3s_node_labels:
  - "node-role.kubernetes.io/control-plane=true"

# -----------------------------------------------------------------------------
# etcd Configuration (Embedded in K3s)
# -----------------------------------------------------------------------------
# K3s uses embedded etcd by default
# Snapshots are automatically managed
k3s_etcd_expose_metrics: true

# -----------------------------------------------------------------------------
# HA Configuration (Future)
# -----------------------------------------------------------------------------
# For HA setup with multiple masters:
# k3s_datastore_endpoint: "https://master-1:2379,https://master-2:2379,https://master-3:2379"
# k3s_server_init: true  # Only on first master
